<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create New Product</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light py-4">

<div class="container">
    <div class="card shadow-lg p-4">
        <h2 class="text-center mb-4">Add New Product</h2>

        <div class="row g-4">
            <!-- Image -->
            <div class="col-md-6">
                <label class="form-label fw-bold">Product Image:</label>
                <input type="file" id="uploadImage" class="form-control" accept="image/*">
                <div class="mt-3 text-center">
                    <img id="preview" class="img-fluid rounded shadow-sm" style="max-height: 200px; display: none;">
                </div>
            </div>

            <!-- Other Fields -->
            <div class="col-md-6">
                <label class="form-label fw-bold">Product Name:</label>
                <input type="text" id="productName" class="form-control" placeholder="Enter product name">

                <label class="form-label fw-bold mt-3">Category:</label>
                <select id="productCategory" class="form-select">
                    <option value="">-- Select Category --</option>
                    <option value="Electronics">Electronics</option>
                    <option value="Clothes">Clothes</option>
                    <option value="Home">Home</option>
                    <option value="Sports">Sports</option>
                </select>

                <label class="form-label fw-bold mt-3">Price ($):</label>
                <input type="number" id="productPrice" class="form-control" placeholder="Enter price">
            </div>
        </div>

        <!-- Save Button -->
        <div class="text-center mt-4">
            <button id="saveProduct" class="btn btn-success px-5 py-2 fw-bold">
                <i class="bi bi-save"></i> Save Product
            </button>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<script>
let selectedImage = "";

document.getElementById('uploadImage').addEventListener('change', function(e) {
    let file = e.target.files[0];
    let reader = new FileReader();

    reader.onload = function(event) {
        selectedImage = event.target.result; 
        let preview = document.getElementById('preview');
        preview.src = selectedImage;
        preview.style.display = "block";
    };

    if (file) {
        reader.readAsDataURL(file);
    }
});

document.getElementById('saveProduct').addEventListener('click', function() {
    let name = document.getElementById('productName').value.trim();
    let category = document.getElementById('productCategory').value;
    let price = parseFloat(document.getElementById('productPrice').value);

    if (!selectedImage || !name || !category || isNaN(price)) {
        alert("Please fill in all fields");
        return;
    }

    let products = JSON.parse(localStorage.getItem("products")) || [];

    let newId = products.length ? products[products.length - 1].id + 1 : 1;

    let newProduct = {
        id: newId,
        name: name,
        category: category,
        price: price,
        discount: 0,
        stock: 0,
        soldCount: 0,
        description: "",
        imageUrl: selectedImage,
        sellerId: 1
    };

    products.push(newProduct);
    localStorage.setItem("products", JSON.stringify(products));

    alert("Product saved successfully");
});
</script>

</body>
</html>
